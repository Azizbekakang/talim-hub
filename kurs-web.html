<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Web Dasturlash | Ta'lim Hub</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
  <style>
    body { background: linear-gradient(135deg, #1e3a8a, #3b82f6); color: #e2e8f0; min-height: 100vh; font-family: 'Segoe UI', sans-serif; }
    .lesson-card { background: rgba(255,255,255,0.1); backdrop-filter: blur(12px); border-radius: 20px; padding: 24px; margin: 20px auto; max-width: 900px; box-shadow: 0 8px 32px rgba(0,0,0,0.4); transition: all 0.4s; }
    .locked { opacity: 0.6; pointer-events: none; position: relative; }
    .locked::after { content: "QULF"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 5rem; color: #fbbf24; font-weight: bold; }
    .btn { padding: 12px 24px; border: none; border-radius: 20px; background: #fbbf24; color: #000; font-weight: bold; cursor: pointer; transition: 0.3s; }
    .btn:hover { background: #facc15; transform: scale(1.05); }
    .correct { background: #22c55e !important; }
    .wrong { background: #ef4444 !important; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #10b981, #22c55e); width: 0%; transition: width 0.8s ease; }
  </style>
</head>
<body class="p-6">
  <div class="max-w-5xl mx-auto">
    <h1 class="text-5xl font-bold text-center mb-8 text-yellow-300">INGLIZ TILI A1 → C1</h1>
    <div class="text-center mb-10">
      <p class="text-2xl mb-4">Kurs bajarilishi: <span id="progressText">0%</span></p>
      <div class="h-4 bg-gray-700 rounded-full overflow-hidden"><div id="progressFill" class="progress-fill"></div></div>
    </div>
    <div id="lessonsContainer"></div>
  </div>

  <script>
    const lessons = [
      {
        title: "1-dars: HTML Kirish",
        video: "UB1O30fR-EE", // HTML — veb sahifaning skeleti
        text: "HTML — veb sahifaning skeleti...",
        pdf: "https://www.tutorialspoint.com/html/html_tutorial.pdf",
        questions: [
          {q: "HTML nima?", a: ["Dizayn", "Struktura", "Logika"], c: 1},
          {q: " h1 nima qiladi?", a: ["Katta sarlavha", "Kichik matn", "Rasm"], c: 0},
          {q: " p tegi nima?", a: ["Paragraf", "Rasm", "Havola"], c: 0},
          {q: " img tegi uchun src nima?", a: ["Rasm manzili", "Matn", "Rang"], c: 0},
          {q: " a href='...' bu nima?", a: ["Havola", "Rasm", "Jadval"], c: 0},
          {q: "HTML fayl kengaytmasi?", a: [".html", ".css", ".js"], c: 0},
          {q: " !DOCTYPE html nima?", a: ["Versiya", "Sarlavha", "Body"], c: 0},
          {q: " head ichida nima bo‘ladi?", a: ["Ko‘rinadigan", "Metadata", "Skript"], c: 1},
          {q: " body nima?", a: ["Ko‘rinadigan qism", "Yashirin", "Server"], c: 0},
          {q: "Semantic teglar misoli?", a: ["<div>", "<section>", "<span>"], c: 1}
        ]
      },
      {
        title: "2-dars: CSS Asoslari",
        video: "OXGznpKZ_sA", 
        text: "CSS — sahifani chiroyli qilish...",
        pdf: "https://fita.vnua.edu.vn/wp-content/uploads/2018/12/TH03109_HTML-and-CSS-design-and-build-websites_giaotrinhchinh2.pdf",
        questions: [
          {q: "CSS nima?", a: ["Struktura", "Dizayn", "Logika"], c: 1},
          {q: "color: red; nima qiladi?", a: ["Matn rangi", "Fon", "Chegara"], c: 0},
          {q: "background-color nima?", a: ["Matn", "Orqa fon", "Shrift"], c: 1},
          {q: "margin va padding farqi?", a: ["Ichki va tashqi bo‘shliq", "Bir xil", "Rang"], c: 0},
          {q: "px, em, rem farqi?", a: ["O‘lchov birliklari", "Ranglar", "Shriftlar"], c: 0},
          {q: "Flexbox nima?", a: ["Joylashuv", "Animatsiya", "Rasm"], c: 0},
          {q: "Grid nima uchun?", a: ["2D joylashuv", "1D", "Matn"], c: 0},
          {q: "@media query nima?", a: ["Responsive", "Animatsiya", "Server"], c: 0},
          {q: "hover qachon ishlaydi?", a: ["Sichqoncha ustida", "Bosganda", "Yuklanganda"], c: 0},
          {q: "Tailwind CSS nima?", a: ["Klasslar bilan CSS", "Framework", "Til"], c: 0}
        ]
      },
      {
        title: "3-dars: JavaScript Kirish",
        video: "PkZNo7MFNFg", 
        text: "JS — vebni jonli qiladi...",
        pdf: "https://renessans-edu.uz/files/books/2023-10-19-05-55-13_b6058ea6582ff3915cc74c84089b3f8a.pdf",
        questions: [
          {q: "JS fayl kengaytmasi?", a: [".js", ".css", ".html"], c: 0},
          {q: "console.log() nima?", a: ["Chiqaradi", "Saqlaydi", "O‘chiradi"], c: 0},
          {q: "let, const, var farqi?", a: ["Scope", "Bir xil", "Rang"], c: 0},
          {q: 2 ta = va 3 ta = farqi?", a: ["Turi tekshiriladi", "Bir xil", "Qo‘shadi"], c: 0},
          {q: "addEventListener nima?", a: ["Hodisa qo‘shish", "O‘chirish", "Animatsiya"], c: 0},
          {q: "DOM nima?", a: ["Sahifa obyekti", "Server", "Baza"], c: 0},
          {q: "querySelector nima qaytaradi?", a: ["1 ta element", "Hammasi", "Matn"], c: 0},
          {q: "async/await nima uchun?", a: ["Vaqtli kod", "Tsikl", "Shart"], c: 0},
          {q: "fetch() nima?", a: ["API so‘rov", "Local", "Cookie"], c: 0},
          {q: "JSON nima?", a: ["Ma'lumot formati", "Til", "Server"], c: 0}
        ]
      }
    ];

    let progress = JSON.parse(localStorage.getItem('web_progress') || '[]');
    const container = document.getElementById("lessonsContainer");

    lessons.forEach((lesson, i) => {
      const unlocked = i === 0 || progress.includes(i - 1);
      const completed = progress.includes(i);

      const div = document.createElement("div");
      div.className = `lesson-card ${!unlocked ? 'locked' : ''}`;
      div.innerHTML = `
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-3xl font-bold ${completed ? 'text-green-400' : 'text-yellow-300'}">
            ${completed ? 'Done' : (unlocked ? 'Play' : 'Lock')} ${lesson.title}
          </h2>
        </div>
        ${unlocked ? `
          <iframe src="https://www.youtube.com/embed/${lesson.video}" class="w-full h-96 rounded-2xl mb-6" allowfullscreen></iframe>
          <p class="text-lg mb-6 leading-relaxed">${lesson.text}</p>
          <a href="${https://renessans-edu.uz/files/books/2023-10-19-05-55-13_b6058ea6582ff3915cc74c84089b3f8a.pdf}" target="_blank" class="inline-block bg-red-600 hover:bg-red-500 text-white font-bold py-4 px-8 rounded-xl mb-8">
            PDF KITOB YUKLASH
          </a>
          <h3 class="text-2xl font-bold mb-6 text-cyan-300">Test (10 savol)</h3>
          <div id="quiz-${i}" class="space-y-6">
            ${lesson.questions.map((q, j) => `
              <div class="bg-white/10 p-6 rounded-xl">
                <p class="font-semibold text-xl mb-4">${j+1}. ${q.q}</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                  ${q.a.map((ans, k) => `<button class="btn" onclick="select(${i},${j},${k},${q.c})">${ans}</button>`).join("")}
                </div>
              </div>
            `).join("")}
          </div>
          <div class="text-center mt-8">
            <button id="submit-${i}" class="hidden bg-gradient-to-r from-green-500 to-emerald-600 text-black font-bold py-4 px-12 rounded-2xl text-xl" onclick="check(${i})">TEKSHIRISH</button>
            <p id="result-${i}" class="mt-6 text-3xl font-bold"></p>
          </div>
        ` : `<div class="text-center py-32 text-3xl opacity-50">Oldingi darsni tugating!</div>`}
      `;
      container.appendChild(div);
    });

    window.select = function(l, q, s, c) {
      document.getElementById(`submit-${l}`).classList.remove('hidden');
      if (!window.ans) window.ans = {};
      if (!window.ans[l]) window.ans[l] = [];
      window.ans[l][q] = s;
    };

    window.check = function(idx) {
      let correct = 0;
      lessons[idx].questions.forEach((q, i) => {
        const sel = window.ans[idx][i];
        if (sel === q.c) correct++;
        document.querySelectorAll(`#quiz-${idx} .grid button`).forEach((b, j) => {
          if (j % q.a.length === q.c) b.classList.add('correct');
          else if (j % q.a.length === sel && sel !== q.c) b.classList.add('wrong');
          b.disabled = true;
        });
      });
      const percent = Math.round((correct / 10) * 100);
      const res = document.getElementById(`result-${idx}`);
      if (percent >= 80) {
        res.innerHTML = `Ajoyib! ${percent}% – Keyingi dars ochildi!`;
        res.className = "text-green-400";
        if (!progress.includes(idx)) {
          progress.push(idx);
          localStorage.setItem('web_progress', JSON.stringify(progress));
          updateProgress();
          setTimeout(() => location.reload(), 2000);
        }
      } else {
        res.innerHTML = `Yana urining! ${percent}% (80% kerak)`;
        res.className = "text-red-400";
      }
    };

    function updateProgress() {
      const p = Math.round((progress.length / lessons.length) * 100);
      document.getElementById('progressText').textContent = p + '%';
      document.getElementById('progressFill').style.width = p + '%';
      if (p === 100) {
        const user = JSON.parse(sessionStorage.getItem('currentUser') || '{}');
        alert(`Tabriklaymiz, ${user.name || "Foydalanuvchi"}!\nIngliz tili kursini muvaffaqiyatli tugatdingiz!`);
        window.open('sertifikat.html?name=' + encodeURIComponent(user.name || "Talaba") + '&kurs=Web+Dasturlash', '_blank');
      }
    }
    updateProgress();
  </script>
</body>
</html>
