<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Olimpiada — TalimHub</title>
<link rel="icon" type="image/png" href="https://i.postimg.cc/3rgW5f0s/logo.png">

<style>
    body { font-family: Arial,sans-serif;background:#eef2ff;margin:0; }
    header { background:#0048ff;padding:14px;color:white;font-size:23px;text-align:center;font-weight:bold; }
    .container { max-width:800px;margin:20px auto;background:#fff;padding:20px;border-radius:10px; }
    .question { margin-bottom:20px;font-size:18px; }
    input[type="text"] { width:100%;padding:10px;font-size:15px;border:1px solid gray;border-radius:6px;margin-top:8px; }
    button { width:100%;background:#0048ff;color:white;border:none;padding:12px;font-size:17px;border-radius:6px;margin-top:15px;cursor:pointer; }
    button:hover { background:#002ea3; }
    #resultBox { margin-top:20px;padding:10px;font-size:18px;font-weight:bold;border-radius:6px;display:none; }
    .score { background:#00b700;color:white; }
    .ranking { background:#ffb700;color:black;margin-top:20px;padding:15px;border-radius:6px; }
    table { width:100%;margin-top:10px;border-collapse:collapse; }
    td,th { border:1px solid gray;padding:8px;text-align:center; }
    th { background:#0048ff;color:white; }
</style>
</head>

<body>

<header>TalimHub — Olimpiada</header>

<div class="container">

    <div id="test"></div>

    <button onclick="finish()">Yakunlash</button>

    <div id="resultBox"></div>
    <div id="rankBox" class="ranking" style="display:none;">
        <h3>Reyting</h3>
        <table id="rankTable">
            <tr><th>Foydalanuvchi</th><th>Ballo</th></tr>
        </table>
    </div>

</div>

<script>
    // === 100 TA SAVOLNI BU YERDA BELGILAYSAN ===
    // Format: ["Savol matni", "Javob"]
    const questions = [
        ["1) If x + 5 = 12, find x.", "7"],
        ["2) 15 × 2 = ?", "30"],
        ["3) 100 / 4 = ?", "25"]
        // 3ta misol qo‘yib berdim, qolganini sen qo‘shaverasan…
        // 100 tagacha faqat shu ko‘rinishda davom ettirasan.
    ];

    // === TESTNI EKRANGA CHIQARISH ===
    let html = "";
    for (let i = 0; i < questions.length; i++) {
        html += 
            <div class="question">
                ${questions[i][0]}
                <input type="text" id="q${i}">
            </div>;
    }
    document.getElementById("test").innerHTML = html;

    // === YAKUNDA BALL HISOBLASH VA REYTINGGA KIRITISH ===
    function finish() {
        let score = 0;
        for (let i = 0; i < questions.length; i++) {
            let ans = document.getElementById("q" + i).value.trim();
            if (ans === questions[i][1]) score++;
        }

        let percent = Math.round((score / questions.length) * 100);

        document.getElementById("resultBox").style.display = "block";
        document.getElementById("resultBox").className = "score";
        document.getElementById("resultBox").innerHTML = "Natija: " + score + " / " + questions.length + " (" + percent + "%)";

        // Foydalanuvchi ismini olish
        let username = prompt("Ismingizni kiriting (Reyting uchun):");
        if (!username) username = "Anonim";

        // Reytingga saqlash (mahalliy brauzer memory)
        let data = JSON.parse(localStorage.getItem("ranking") || "[]");
        data.push({ name: username, score: score });
        data.sort((a, b) => b.score - a.score);
        localStorage.setItem("ranking", JSON.stringify(data));

        showRanking();
    }

    // === REYTINGNI CHIQARISH ===
    function showRanking() {
        document.getElementById("rankBox").style.display = "block";
        let data = JSON.parse(localStorage.getItem("ranking") || "[]");
        let table = "<tr><th>Foydalanuvchi</th><th>Ballo</th></tr>";
        for (let r of data) {
            table += <tr><td>${r.name}</td><td>${r.score}</td></tr>;
        }
        document.getElementById("rankTable").innerHTML = table;
    }
</script>

</body>
</html>
